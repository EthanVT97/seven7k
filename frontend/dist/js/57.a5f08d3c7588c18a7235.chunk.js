"use strict";(self.webpackChunkseven7k_frontend=self.webpackChunkseven7k_frontend||[]).push([[57],{57:(e,r,t)=>{t.r(r),t.d(r,{default:()=>m});var a=t(4848),n=t(6540),s=t(7767),o=t(2896),i=t(1083),l=t(2771),c=t(6023),d=function(){return d=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},d.apply(this,arguments)},u=function(e,r,t,a){return new(t||(t=Promise))((function(n,s){function o(e){try{l(a.next(e))}catch(r){s(r)}}function i(e){try{l(a.throw(e))}catch(r){s(r)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(o,i)}l((a=a.apply(e,r||[])).next())}))},p=function(e,r){var t,a,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(t=1,a&&(n=2&i[0]?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=r.call(e,o)}catch(l){i=[6,l],a=0}finally{t=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};const m=function(){var e,r,t=this,m=(0,n.useState)({email:"",password:""}),f=m[0],h=m[1],y=(0,n.useState)(!1),g=y[0],x=y[1],b=(0,n.useState)(""),v=b[0],w=b[1],k=(0,s.Zp)(),j=(0,s.zy)(),N=(0,o.wA)(),S=(null===(r=null===(e=j.state)||void 0===e?void 0:e.from)||void 0===r?void 0:r.pathname)||"/dashboard",C=function(e){var r=e.target,t=r.name,a=r.value;h((function(e){var r;return d(d({},e),((r={})[t]=a,r))}))};return(0,a.jsx)("div",d({className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},{children:(0,a.jsxs)("div",d({className:"max-w-md w-full space-y-8"},{children:[(0,a.jsx)("div",{children:(0,a.jsx)("h2",d({className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"},{children:"Sign in to your account"}))}),v&&(0,a.jsx)("div",d({className:"rounded-md bg-red-50 dark:bg-red-900 p-4"},{children:(0,a.jsx)("div",d({className:"text-sm text-red-700 dark:text-red-200"},{children:v}))})),(0,a.jsxs)("form",d({className:"mt-8 space-y-6",onSubmit:function(e){return u(t,void 0,void 0,(function(){var r,t,a,n,s,o,d;return p(this,(function(u){switch(u.label){case 0:e.preventDefault(),w(""),x(!0),u.label=1;case 1:return u.trys.push([1,4,5,6]),console.log("Attempting to login with:",{url:"".concat("http://192.168.84.225:5000","/api/auth/login"),data:f}),[4,i.A.post("".concat("http://192.168.84.225:5000","/api/auth/login"),f,{headers:{"Content-Type":"application/json"},timeout:5e3})];case 2:return r=u.sent(),console.log("Login response:",r.data),t=r.data,a=t.token,n=t.user,localStorage.setItem("token",a),i.A.defaults.headers.common.Authorization="Bearer ".concat(a),[4,N((0,l.iD)({email:n.email,password:f.password}))];case 3:return u.sent(),N((0,c.z8)({type:"success",message:"Successfully logged in!"})),k(S,{replace:!0}),[3,6];case 4:return s=u.sent(),console.error("Login error:",s),o="Login failed. Please try again.",i.A.isAxiosError(s)&&("ECONNREFUSED"===s.code?o="Unable to connect to the server. Please check if the server is running.":s.response?o=(null===(d=s.response.data)||void 0===d?void 0:d.message)||s.response.data||o:s.request&&(o="No response received from server. Please try again.")),w(o),N((0,c.z8)({type:"error",message:o})),[3,6];case 5:return x(!1),[7];case 6:return[2]}}))}))}},{children:[(0,a.jsxs)("div",d({className:"rounded-md shadow-sm -space-y-px"},{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",d({htmlFor:"email-address",className:"sr-only"},{children:"Email address"})),(0,a.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,disabled:g,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"Email address",value:f.email,onChange:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",d({htmlFor:"password",className:"sr-only"},{children:"Password"})),(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,disabled:g,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"Password",value:f.password,onChange:C})]})]})),(0,a.jsx)("div",{children:(0,a.jsx)("button",d({type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},{children:g?(0,a.jsxs)("span",d({className:"flex items-center"},{children:[(0,a.jsxs)("svg",d({className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},{children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})),"Signing in..."]})):"Sign in"}))})]}))]}))}))}}}]);