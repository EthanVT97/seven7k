"use strict";(self.webpackChunkseven7k_frontend=self.webpackChunkseven7k_frontend||[]).push([[57],{57:(e,r,a)=>{a.r(r),a.d(r,{default:()=>u});var t=a(4848),n=a(6540),s=a(7767),o=a(2896),i=a(1083),l=a(2771),c=a(6023),d=function(){return d=Object.assign||function(e){for(var r,a=1,t=arguments.length;a<t;a++)for(var n in r=arguments[a])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},d.apply(this,arguments)};const u=function(){var e,r,a=this,u=(0,n.useState)({email:"",password:""}),p=u[0],m=u[1],f=(0,n.useState)(!1),h=f[0],y=f[1],x=(0,n.useState)(""),b=x[0],g=x[1],v=(0,s.Zp)(),w=(0,s.zy)(),k=(0,o.wA)(),j=(null===(r=null===(e=w.state)||void 0===e?void 0:e.from)||void 0===r?void 0:r.pathname)||"/dashboard",N=function(e){var r=e.target,a=r.name,t=r.value;m((function(e){var r;return d(d({},e),((r={})[a]=t,r))}))};return(0,t.jsx)("div",d({className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},{children:(0,t.jsxs)("div",d({className:"max-w-md w-full space-y-8"},{children:[(0,t.jsx)("div",{children:(0,t.jsx)("h2",d({className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"},{children:"Sign in to your account"}))}),b&&(0,t.jsx)("div",d({className:"rounded-md bg-red-50 dark:bg-red-900 p-4"},{children:(0,t.jsx)("div",d({className:"text-sm text-red-700 dark:text-red-200"},{children:b}))})),(0,t.jsxs)("form",d({className:"mt-8 space-y-6",onSubmit:function(e){return function(e,r,a,t){return new(a||(a=Promise))((function(n,s){function o(e){try{l(t.next(e))}catch(r){s(r)}}function i(e){try{l(t.throw(e))}catch(r){s(r)}}function l(e){var r;e.done?n(e.value):(r=e.value,r instanceof a?r:new a((function(e){e(r)}))).then(o,i)}l((t=t.apply(e,r||[])).next())}))}(a,void 0,void 0,(function(){var r,a,t,n,s,o,d;return function(e,r){var a,t,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(a=1,t&&(n=2&i[0]?t.return:i[0]?t.throw||((n=t.return)&&n.call(t),0):t.next)&&!(n=n.call(t,i[1])).done)return n;switch(t=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,t=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=r.call(e,o)}catch(l){i=[6,l],t=0}finally{a=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(u){switch(u.label){case 0:e.preventDefault(),g(""),y(!0),u.label=1;case 1:return u.trys.push([1,4,5,6]),[4,i.A.post("".concat(process.env.REACT_APP_API_URL,"/api/auth/login"),p,{headers:{"Content-Type":"application/json"},timeout:5e3})];case 2:return r=u.sent(),a=r.data,t=a.token,n=a.user,localStorage.setItem("token",t),i.A.defaults.headers.common.Authorization="Bearer ".concat(t),[4,k((0,l.iD)({email:n.email,password:p.password}))];case 3:return u.sent(),k((0,c.z8)({type:"success",message:"Successfully logged in!"})),v(j,{replace:!0}),[3,6];case 4:return s=u.sent(),o="Login failed. Please try again.",i.A.isAxiosError(s)&&("ECONNREFUSED"===s.code?o="Unable to connect to the server. Please check if the server is running.":s.response?o=(null===(d=s.response.data)||void 0===d?void 0:d.message)||s.response.data||o:s.request&&(o="No response received from server. Please try again.")),g(o),k((0,c.z8)({type:"error",message:o})),[3,6];case 5:return y(!1),[7];case 6:return[2]}}))}))}},{children:[(0,t.jsxs)("div",d({className:"rounded-md shadow-sm -space-y-px"},{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",d({htmlFor:"email-address",className:"sr-only"},{children:"Email address"})),(0,t.jsx)("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,disabled:h,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"Email address",value:p.email,onChange:N})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",d({htmlFor:"password",className:"sr-only"},{children:"Password"})),(0,t.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,disabled:h,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"Password",value:p.password,onChange:N})]})]})),(0,t.jsx)("div",{children:(0,t.jsx)("button",d({type:"submit",disabled:h,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed"},{children:h?(0,t.jsxs)("span",d({className:"flex items-center"},{children:[(0,t.jsxs)("svg",d({className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},{children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})),"Signing in..."]})):"Sign in"}))})]}))]}))}))}}}]);